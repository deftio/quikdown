<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>quikdown CDN ESM Example</title>
    
    <!-- Theme CSS - choose one or both -->
    <link rel="stylesheet" href="https://unpkg.com/quikdown@1.0.3/dist/quikdown.light.min.css">
    <link rel="stylesheet" href="https://unpkg.com/quikdown@1.0.3/dist/quikdown.dark.min.css">
    
    <!-- Optional: Highlight.js for syntax highlighting -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github-dark.min.css">
    
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            max-width: 800px;
            margin: 2rem auto;
            padding: 0 1rem;
        }
        
        .controls {
            margin-bottom: 1rem;
            padding: 1rem;
            background: #f5f5f5;
            border-radius: 8px;
        }
        
        .output {
            min-height: 200px;
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 1rem;
        }
        
        /* Container for theme switching */
        .output.dark {
            background: #1a1a1a;
        }
        
        button {
            padding: 0.5rem 1rem;
            margin-right: 0.5rem;
            border: none;
            border-radius: 4px;
            background: #667eea;
            color: white;
            cursor: pointer;
        }
        
        button:hover {
            background: #5a67d8;
        }
        
        textarea {
            width: 100%;
            min-height: 150px;
            padding: 0.5rem;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-family: monospace;
            font-size: 14px;
        }
    </style>
</head>
<body>
    <h1>quikdown CDN ESM Example</h1>
    <p>This example shows how to use quikdown via CDN with ES Modules (recommended for modern applications).</p>
    
    <div class="controls">
        <h3>Markdown Input:</h3>
        <textarea id="markdown-input"># Hello quikdown!

This is a **CDN ESM** example showing how to use quikdown in modern browsers.

## Features Demo

- âœ… Task lists with [x] checked items
- ðŸš€ **Bold** and *italic* text
- `inline code` support
- [Links](https://github.com/deftio/quikdown) with XSS protection

### Code Block with Syntax Highlighting

```javascript
// quikdown with fence plugin
const html = quikdown(markdown, {
    fence_plugin: (code, lang) => {
        if (lang && hljs.getLanguage(lang)) {
            return hljs.highlight(code, { language: lang }).value;
        }
        return code;
    }
});
```

### Table Support

| Feature | Status | Size |
|---------|--------|------|
| Markdown | âœ… | 7.4KB |
| Themes | âœ… | 2KB |
| Plugins | âœ… | 0KB |

> **Note:** quikdown automatically escapes HTML for security!</textarea>
        
        <button onclick="renderMarkdown()">Render</button>
        <button onclick="toggleTheme()">Toggle Theme</button>
        <button onclick="toggleInlineStyles()">Toggle Inline Styles</button>
    </div>
    
    <h3>Output:</h3>
    <div id="output" class="output quikdown-light"></div>
    
    <!-- Load quikdown and optional plugins via ES Modules -->
    <script type="module">
        // Import quikdown via CDN
        import quikdown from 'https://unpkg.com/quikdown@1.0.3/dist/quikdown.esm.min.js';
        
        // Optional: Import Highlight.js for syntax highlighting
        import hljs from 'https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/es/highlight.min.js';
        import javascript from 'https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/es/languages/javascript.min.js';
        
        // Register language for highlighting
        hljs.registerLanguage('javascript', javascript);
        
        // Make functions available globally for onclick handlers
        window.quikdown = quikdown;
        window.hljs = hljs;
        
        // State
        let isDarkTheme = false;
        let useInlineStyles = false;
        
        // Render function
        window.renderMarkdown = function() {
            const markdown = document.getElementById('markdown-input').value;
            const output = document.getElementById('output');
            
            // Configure options
            const options = {
                inline_styles: useInlineStyles,
                fence_plugin: (code, lang) => {
                    // Custom fence plugin for syntax highlighting
                    if (lang && hljs.getLanguage(lang)) {
                        try {
                            const highlighted = hljs.highlight(code, { language: lang }).value;
                            return `<pre class="hljs"><code class="language-${lang}">${highlighted}</code></pre>`;
                        } catch (err) {
                            console.error('Highlight error:', err);
                        }
                    }
                    // Fall back to default rendering
                    return undefined;
                }
            };
            
            // Render markdown to HTML
            const html = quikdown(markdown, options);
            output.innerHTML = html;
            
            // Log info
            console.log('Rendered with quikdown v' + quikdown.version);
            console.log('Options:', options);
        };
        
        // Theme toggle
        window.toggleTheme = function() {
            const output = document.getElementById('output');
            isDarkTheme = !isDarkTheme;
            
            if (isDarkTheme) {
                output.classList.remove('quikdown-light');
                output.classList.add('quikdown-dark', 'dark');
            } else {
                output.classList.remove('quikdown-dark', 'dark');
                output.classList.add('quikdown-light');
            }
            
            // Re-render to apply theme
            renderMarkdown();
        };
        
        // Inline styles toggle
        window.toggleInlineStyles = function() {
            useInlineStyles = !useInlineStyles;
            console.log('Inline styles:', useInlineStyles);
            renderMarkdown();
        };
        
        // Initial render
        renderMarkdown();
    </script>
</body>
</html>