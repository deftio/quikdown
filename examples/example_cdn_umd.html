<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>quikdown CDN UMD Example</title>
    
    <!-- Theme CSS - choose one or both -->
    <link rel="stylesheet" href="https://unpkg.com/quikdown@1.0.3/dist/quikdown.light.min.css">
    <link rel="stylesheet" href="https://unpkg.com/quikdown@1.0.3/dist/quikdown.dark.min.css">
    
    <!-- Optional: Highlight.js for syntax highlighting -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    
    <!-- Load quikdown via UMD (legacy/traditional approach) -->
    <script src="https://unpkg.com/quikdown@1.0.3/dist/quikdown.umd.min.js"></script>
    
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            max-width: 800px;
            margin: 2rem auto;
            padding: 0 1rem;
        }
        
        .controls {
            margin-bottom: 1rem;
            padding: 1rem;
            background: #f5f5f5;
            border-radius: 8px;
        }
        
        .output {
            min-height: 200px;
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 1rem;
        }
        
        /* Container for theme switching */
        .output.dark {
            background: #1a1a1a;
        }
        
        button {
            padding: 0.5rem 1rem;
            margin-right: 0.5rem;
            border: none;
            border-radius: 4px;
            background: #667eea;
            color: white;
            cursor: pointer;
        }
        
        button:hover {
            background: #5a67d8;
        }
        
        textarea {
            width: 100%;
            min-height: 150px;
            padding: 0.5rem;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-family: monospace;
            font-size: 14px;
        }
        
        .info {
            background: #f0f9ff;
            border-left: 4px solid #3182ce;
            padding: 0.75rem 1rem;
            margin: 1rem 0;
        }
    </style>
</head>
<body>
    <h1>quikdown CDN UMD Example</h1>
    <p>This example shows how to use quikdown via CDN with UMD format (for legacy browser support).</p>
    
    <div class="info">
        <strong>Note:</strong> UMD format makes quikdown available as <code>window.quikdown</code>. 
        This approach works in older browsers but ES Modules are recommended for new projects.
    </div>
    
    <div class="controls">
        <h3>Markdown Input:</h3>
        <textarea id="markdown-input"># Hello quikdown!

This is a **CDN UMD** example for legacy browser support.

## Why Use UMD?

- üîß Works in older browsers without module support
- üì¶ Simple script tag inclusion
- üåç Global `quikdown` variable
- ‚ö° No build tools required

### Code Block Example

```javascript
// Using quikdown with UMD
// Available as global variable
const html = quikdown(markdown, {
    inline_styles: true
});
document.getElementById('output').innerHTML = html;
```

### Simple Integration

Just include the script tag:
```html
<script src="https://unpkg.com/quikdown/dist/quikdown.umd.min.js"></script>
```

### Features

| Feature | UMD | ESM |
|---------|-----|-----|
| Old Browsers | ‚úÖ | ‚ùå |
| Modern Syntax | ‚ùå | ‚úÖ |
| Tree Shaking | ‚ùå | ‚úÖ |
| Simple Setup | ‚úÖ | ‚úÖ |

> **Tip:** Use UMD for maximum compatibility, ESM for modern applications.</textarea>
        
        <button onclick="renderMarkdown()">Render</button>
        <button onclick="toggleTheme()">Toggle Theme</button>
        <button onclick="toggleInlineStyles()">Toggle Inline Styles</button>
        <button onclick="showVersion()">Show Version</button>
    </div>
    
    <h3>Output:</h3>
    <div id="output" class="output quikdown-light"></div>
    
    <script>
        // quikdown is available as window.quikdown (global variable)
        console.log('quikdown loaded:', typeof quikdown !== 'undefined');
        
        // State
        let isDarkTheme = false;
        let useInlineStyles = false;
        
        // Render function
        function renderMarkdown() {
            const markdown = document.getElementById('markdown-input').value;
            const output = document.getElementById('output');
            
            // Configure options
            const options = {
                inline_styles: useInlineStyles,
                fence_plugin: {
                    render: function(code, lang) {
                    // Custom fence plugin for syntax highlighting
                    if (lang && typeof hljs !== 'undefined' && hljs.getLanguage(lang)) {
                        try {
                            const highlighted = hljs.highlight(code, { language: lang }).value;
                            return '<pre class="hljs"><code class="language-' + lang + '">' + highlighted + '</code></pre>';
                        } catch (err) {
                            console.error('Highlight error:', err);
                        }
                    }
                    // Fall back to default rendering
                        return undefined;
                    }
                }
            };
            
            // Render markdown to HTML
            const html = quikdown(markdown, options);
            output.innerHTML = html;
            
            // Log info
            console.log('Rendered with quikdown');
            console.log('Options:', options);
        }
        
        // Theme toggle
        function toggleTheme() {
            const output = document.getElementById('output');
            isDarkTheme = !isDarkTheme;
            
            if (isDarkTheme) {
                output.classList.remove('quikdown-light');
                output.classList.add('quikdown-dark', 'dark');
            } else {
                output.classList.remove('quikdown-dark', 'dark');
                output.classList.add('quikdown-light');
            }
            
            // Re-render to apply theme
            renderMarkdown();
        }
        
        // Inline styles toggle
        function toggleInlineStyles() {
            useInlineStyles = !useInlineStyles;
            alert('Inline styles: ' + (useInlineStyles ? 'ON' : 'OFF'));
            renderMarkdown();
        }
        
        // Show version
        function showVersion() {
            if (typeof quikdown !== 'undefined' && quikdown.version) {
                alert('quikdown version: ' + quikdown.version);
            } else {
                alert('quikdown is loaded but version is not available');
            }
        }
        
        // Generate CSS dynamically example
        function generateCSS() {
            // Example of using emitStyles
            const lightCSS = quikdown.emitStyles('quikdown-', 'light');
            const darkCSS = quikdown.emitStyles('quikdown-', 'dark');
            
            console.log('Light theme CSS length:', lightCSS.length);
            console.log('Dark theme CSS length:', darkCSS.length);
        }
        
        // Initial render when page loads
        window.onload = function() {
            renderMarkdown();
            
            // Show that quikdown methods are available
            console.log('quikdown methods available:');
            console.log('- quikdown() function:', typeof quikdown === 'function');
            console.log('- quikdown.version:', quikdown.version);
            console.log('- quikdown.emitStyles():', typeof quikdown.emitStyles === 'function');
            console.log('- quikdown.configure():', typeof quikdown.configure === 'function');
        };
    </script>
</body>
</html>