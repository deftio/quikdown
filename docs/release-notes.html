<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Release Notes - quikdown Documentation</title>
    <link rel="stylesheet" href="https://unpkg.com/github-markdown-css@5/github-markdown.css">
    <link rel="stylesheet" href="https://unpkg.com/prismjs@1/themes/prism.css">
    <style>
        body {
            box-sizing: border-box;
            min-width: 200px;
            max-width: 980px;
            margin: 0 auto;
            padding: 45px;
        }
        .markdown-body {
            box-sizing: border-box;
            min-width: 200px;
            max-width: 980px;
            margin: 0 auto;
        }
        @media (max-width: 767px) {
            body { padding: 15px; }
        }
        /* Ensure emojis display properly */
        .markdown-body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji";
        }
        /* Code block styling */
        pre {
            background-color: #f6f8fa;
            border-radius: 6px;
            padding: 16px;
            overflow: auto;
        }
        code {
            background-color: rgba(175, 184, 193, 0.2);
            padding: 0.2em 0.4em;
            border-radius: 3px;
            font-size: 85%;
        }
        pre code {
            background-color: transparent;
            padding: 0;
        }
        /* Table styling */
        table {
            border-collapse: collapse;
            width: 100%;
            margin-top: 16px;
            margin-bottom: 16px;
        }
        table th, table td {
            border: 1px solid #d0d7de;
            padding: 6px 13px;
        }
        table tr:nth-child(2n) {
            background-color: #f6f8fa;
        }
    </style>
    <script src="https://unpkg.com/prismjs@1/components/prism-core.min.js"></script>
    <script src="https://unpkg.com/prismjs@1/plugins/autoloader/prism-autoloader.min.js"></script>
</head>
<body>
    <article class="markdown-body">
        <h1>Release Notes</h1>
<h2>v1.0.3 (2025-08-17)</h2>
<h3>Major Size Optimizations</h3>
<ul>
<li><strong>Achieved 24% size reduction</strong>: Bundle now ~7.0KB (down from 9.2KB)<ul>
<li>Implemented minifier-aware optimizations across dev2-dev4 phases</li>
<li>Module-level constant hoisting (QUIKDOWN_STYLES, CLASS_PREFIX, PLACEHOLDER_CB, ESC_MAP)</li>
<li>Optimized placeholder strings (§CB§ vs %%%CODEBLOCK%%%)</li>
<li>CSS string optimization (removed spaces after colons)</li>
<li>Build-time version injection instead of runtime imports</li>
<li>Shorter variable names in critical paths</li>
<li>Eliminated duplicate getAttr functions</li>
</ul>
</li>
</ul>
<h3>Experimental Lexer Implementation</h3>
<ul>
<li>Developed alternative state-machine based parser (<code>quikdown-lex</code>)<ul>
<li>Available as separate build: <code>npm run build:lex</code></li>
<li>100% test compatibility with regex implementation</li>
<li>~7.9KB minified (0.9KB larger than regex version)</li>
<li>4-8% slower but more maintainable architecture</li>
<li>Better suited for future features like streaming or AST generation</li>
<li>Comprehensive documentation in <code>docs/lexer-implementation.md</code></li>
</ul>
</li>
</ul>
<h3>Build System Improvements</h3>
<ul>
<li>Fixed sourcemap warnings in Rollup configuration</li>
<li>Separated lexer build from main distribution</li>
<li>Added performance benchmarking: <code>npm run test:perf</code></li>
<li>Test coverage now properly tracks dist files (99.56% coverage)</li>
</ul>
<h3>Developer Experience</h3>
<ul>
<li>Added TypeScript definitions (<code>dist/quikdown.d.ts</code>)<ul>
<li>Full type safety for options and return values</li>
<li>Comprehensive JSDoc comments</li>
<li>Compatible with all modern IDEs</li>
</ul>
</li>
<li>Created performance benchmark suite<ul>
<li>Compares regex vs lexer implementations</li>
<li>Tests both small (400 char) and large (22KB) documents</li>
<li>Memory usage tracking capabilities</li>
</ul>
</li>
</ul>
<h3>Code Quality</h3>
<ul>
<li>Eliminated style duplication between main function and <code>emitStyles()</code></li>
<li>Improved code organization with pattern arrays</li>
<li>Fixed test configuration to measure dist files instead of src</li>
<li>Maintained high test coverage (99.56% statements, 92.12% branches)</li>
</ul>
<h3>CSS Theme System Improvements</h3>
<ul>
<li><strong>Container-based theme scoping</strong>: Themes now use parent-child selectors<ul>
<li>Light theme: <code>.quikdown-light .quikdown-h1 { ... }</code></li>
<li>Dark theme: <code>.quikdown-dark .quikdown-h1 { ... }</code></li>
<li>Allows multiple themes on the same page without conflicts</li>
</ul>
</li>
<li><strong>Explicit color properties for robustness</strong>: Both themes now specify text colors<ul>
<li>Light theme explicitly sets <code>color: #333</code> for all text elements</li>
<li>Dark theme sets <code>color: #e0e0e0</code> for light text on dark backgrounds</li>
<li>Prevents inheritance issues when deployed on pages with custom styles</li>
</ul>
</li>
<li><strong>CSS generation from emitStyles()</strong>: All theme CSS generated directly from JS<ul>
<li><code>npm run build:css</code> generates theme files from <code>emitStyles(&#39;quikdown-&#39;, &#39;light/dark&#39;)</code></li>
<li><code>npm run minify:css</code> creates production-ready minified versions</li>
<li>Single source of truth for styles in JavaScript</li>
</ul>
</li>
<li><strong>Auto dark mode support</strong>: Dark CSS includes media query for system preferences<ul>
<li><code>.quikdown-auto</code> class automatically applies dark theme when <code>prefers-color-scheme: dark</code></li>
</ul>
</li>
<li><strong>Theme file organization</strong>:<ul>
<li><code>dist/quikdown.light.css</code> - Light theme (3.2KB)</li>
<li><code>dist/quikdown.dark.css</code> - Dark theme with auto mode (4.3KB)</li>
<li>Minified versions: 1.9KB and 2.6KB respectively</li>
</ul>
</li>
</ul>
<h3>Documentation</h3>
<ul>
<li>Added comprehensive lexer implementation guide</li>
<li>Updated todo.md with current progress</li>
<li>Added experimental feature note to README</li>
<li>Created detailed architecture documentation</li>
<li>CSS theme generation tools in <code>tools/generateThemeCSS.js</code></li>
</ul>
<h2>v1.0.2</h2>
<h3>Bug Fixes</h3>
<ul>
<li>Fixed critical ~~~ fence regex bug that was matching fence markers in the middle of text<ul>
<li>Now requires fence markers to be at the start of lines</li>
<li>Properly handles text like &quot;## Test with ~~~&quot; without creating empty code blocks</li>
</ul>
</li>
</ul>
<h3>Improvements</h3>
<ul>
<li>Simplified theme styles for minimal footprint</li>
<li>Updated multi-theme demo with better contrast<ul>
<li>Fixed dark mode text visibility issues</li>
<li>Improved light theme code block contrast</li>
<li>Enhanced table header readability in both themes</li>
</ul>
</li>
</ul>
<h3>Documentation</h3>
<ul>
<li>Removed hardcoded file size references from README</li>
<li>Renamed main demo from <code>live-demo.html</code> to <code>quikdown-live.html</code></li>
<li>Added quikdown icon/favicon to all example pages</li>
<li>Updated todo.md with current feature set</li>
</ul>
<h2>v1.0.1 (2025-08-09)</h2>
<h3>Bug Fixes</h3>
<ul>
<li>Fixed README demo URL</li>
<li>Version sync updates across all distribution files</li>
</ul>
<h3>Improvements</h3>
<ul>
<li>Minor performance optimizations</li>
<li>Test coverage improvements</li>
<li>Documentation updates</li>
</ul>
<h3>Build</h3>
<ul>
<li>Prepared CI/CD for automated releases</li>
</ul>
<h2>v1.0.0</h2>
<h3>Initial Release</h3>
<ul>
<li>Core markdown parser with CommonMark subset support</li>
<li>Built-in XSS protection with HTML escaping</li>
<li>URL sanitization for links and images</li>
<li>Support for both ``` and ~~~ fence markers</li>
<li>Flexible table parsing (with/without leading pipes)</li>
<li>Task list support with checkboxes</li>
<li>Autolink detection for bare URLs</li>
<li>Fence plugin system for custom code block rendering</li>
<li>Inline styles or CSS class output modes</li>
<li>Zero dependencies</li>
<li>Under 10KB minified</li>
<li>99%+ test coverage</li>
<li>Works in browser and Node.js environments</li>
</ul>
<h3>Supported Markdown Features</h3>
<ul>
<li>Headings (H1-H6) with optional trailing #&#39;s</li>
<li>Bold, italic, strikethrough formatting</li>
<li>Inline code and fenced code blocks</li>
<li>Links and images with URL sanitization</li>
<li>Tables with alignment support</li>
<li>Ordered and unordered lists</li>
<li>Nested lists</li>
<li>Task lists with checkboxes</li>
<li>Blockquotes</li>
<li>Horizontal rules</li>
<li>Line breaks (two spaces)</li>
<li>Paragraphs</li>
</ul>
<h3>Security Features</h3>
<ul>
<li>HTML entity escaping by default</li>
<li>URL sanitization blocking javascript:, vbscript:, data: protocols</li>
<li>Exception for data:image/* for embedded images</li>
<li>External links get rel=&quot;noopener noreferrer&quot;</li>
<li>Optional allow_unsafe_urls flag for trusted content</li>
</ul>
<h3>API</h3>
<ul>
<li><code>quikdown(markdown, options)</code> - Main parser function</li>
<li><code>quikdown.emitStyles()</code> - Generate CSS for quikdown classes</li>
<li><code>quikdown.configure(options)</code> - Create configured parser</li>
<li><code>quikdown.version</code> - Version string</li>
</ul>

    </article>
    <script>
        // Syntax highlighting
        if (typeof Prism !== 'undefined') {
            Prism.highlightAll();
        }
    </script>
</body>
</html>