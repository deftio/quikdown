/**
 * quikdown - Lightweight Markdown Parser
 * @version 1.0.2
 * @license BSD-2-Clause
 * @copyright DeftIO 2025
 */
function e(e,t={}){if(!e||"string"!=typeof e)return"";const{fence_plugin:r,inline_styles:o=!1}=t,l={h1:"font-size: 2em; font-weight: 600; margin: 0.67em 0; text-align: left",h2:"font-size: 1.5em; font-weight: 600; margin: 0.83em 0",h3:"font-size: 1.25em; font-weight: 600; margin: 1em 0",h4:"font-size: 1em; font-weight: 600; margin: 1.33em 0",h5:"font-size: 0.875em; font-weight: 600; margin: 1.67em 0",h6:"font-size: 0.85em; font-weight: 600; margin: 2em 0",pre:"background: #f4f4f4; padding: 10px; border-radius: 4px; overflow-x: auto; margin: 1em 0",code:"background: #f0f0f0; padding: 2px 4px; border-radius: 3px; font-family: monospace",blockquote:"border-left: 4px solid #ddd; margin-left: 0; padding-left: 1em",table:"border-collapse: collapse; width: 100%; margin: 1em 0",thead:"",tbody:"",tr:"",th:"border: 1px solid #ddd; padding: 8px; background-color: #f2f2f2; font-weight: bold; text-align: left",td:"border: 1px solid #ddd; padding: 8px; text-align: left",hr:"border: none; border-top: 1px solid #ddd; margin: 1em 0",img:"max-width: 100%; height: auto",a:"color: #0066cc; text-decoration: underline",strong:"font-weight: bold",em:"font-style: italic",del:"text-decoration: line-through",ul:"margin: 0.5em 0; padding-left: 2em",ol:"margin: 0.5em 0; padding-left: 2em",li:"margin: 0.25em 0",br:""};function i(e,t=""){if(o){const n=l[e]||"",r=t?`${n}; ${t}`:n;return r?` style="${r}"`:""}return` class="quikdown-${e}"`}function a(e){const t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};return e.replace(/[&<>"']/g,e=>t[e])}function s(e,t=!1){if(!e)return"";if(t)return e;const n=e.trim(),r=n.toLowerCase(),o=["javascript:","vbscript:","data:"];for(const e of o)if(r.startsWith(e))return"data:"===e&&r.startsWith("data:image/")?n:"#";return n}let c=e;const p=[],d=[];return c=c.replace(/(```|~~~)([^\n]*)\n([\s\S]*?)\1/g,(e,t,n,o)=>{const l=`%%%CODEBLOCK${p.length}%%%`,i=n?n.trim():"";return r&&"function"==typeof r?p.push({lang:i,code:o.trimEnd(),custom:!0}):p.push({lang:i,code:a(o.trimEnd()),custom:!1}),l}),c=c.replace(/`([^`]+)`/g,(e,t)=>{const n=`%%%INLINECODE${d.length}%%%`;return d.push(a(t)),n}),c=a(c),c=function(e,t,r){const o=e.split("\n"),l=[];let i=!1,a=[];for(let e=0;e<o.length;e++){const s=o[e].trim();if(s.includes("|")&&(s.startsWith("|")||/[^\\|]/.test(s)))i||(i=!0,a=[]),a.push(s);else{if(i){const e=n(a,t,r);e?l.push(e):l.push(...a),i=!1,a=[]}l.push(o[e])}}if(i&&a.length>0){const e=n(a,t,r);e?l.push(e):l.push(...a)}return l.join("\n")}(c,o,l),c=c.replace(/^(#{1,6})\s+(.+?)\s*#*$/gm,(e,t,n)=>{const r=t.length;return`<h${r}${i("h"+r)}>${n}</h${r}>`}),c=c.replace(/^&gt;\s+(.+)$/gm,`<blockquote${i("blockquote")}>$1</blockquote>`),c=c.replace(/<\/blockquote>\n<blockquote>/g,"\n"),c=c.replace(/^---+$/gm,`<hr${i("hr")}>`),c=function(e,t,n){function r(e,r=""){if(t){const t=n[e]||"",o=r?`${t}; ${r}`:t;return o?` style="${o}"`:""}return` class="quikdown-${e}"`}const o=e.split("\n"),l=[];let i=[];for(let e=0;e<o.length;e++){const n=o[e],a=n.match(/^(\s*)([*\-+]|\d+\.)\s+(.+)$/);if(a){const[,e,n,o]=a,s=Math.floor(e.length/2),c=/^\d+\./.test(n),p=c?"ol":"ul";let d=o,g="";const f=o.match(/^\[([x ])\]\s+(.*)$/i);if(f&&!c){const[,e,n]=f,r="x"===e.toLowerCase();d=`<input type="checkbox"${t?' style="margin-right: 0.5em"':' class="quikdown-task-checkbox"'}${r?" checked":""} disabled> ${n}`,g=t?' style="list-style: none"':' class="quikdown-task-item"'}for(;i.length>s+1;){const e=i.pop();l.push(`</${e.type}>`)}if(i.length===s)i.push({type:p,level:s}),l.push(`<${p}${r(p)}>`);else if(i.length===s+1){const e=i[i.length-1];e.type!==p&&(l.push(`</${e.type}>`),i.pop(),i.push({type:p,level:s}),l.push(`<${p}${r(p)}>`))}const u=g||r("li");l.push(`<li${u}>${d}</li>`)}else{for(;i.length>0;){const e=i.pop();l.push(`</${e.type}>`)}l.push(n)}}for(;i.length>0;){const e=i.pop();l.push(`</${e.type}>`)}return l.join("\n")}(c,o,l),c=c.replace(/!\[([^\]]*)\]\(([^)]+)\)/g,(e,n,r)=>{const o=s(r,t.allow_unsafe_urls);return`<img${i("img")} src="${o}" alt="${n}">`}),c=c.replace(/\[([^\]]+)\]\(([^)]+)\)/g,(e,n,r)=>{const o=s(r,t.allow_unsafe_urls),l=/^https?:\/\//i.test(o)?' rel="noopener noreferrer"':"";return`<a${i("a")} href="${o}"${l}>${n}</a>`}),c=c.replace(/(^|\s)(https?:\/\/[^\s<]+)/g,(e,n,r)=>{const o=s(r,t.allow_unsafe_urls);return`${n}<a${i("a")} href="${o}" rel="noopener noreferrer">${r}</a>`}),c=c.replace(/\*\*(.+?)\*\*/g,`<strong${i("strong")}>$1</strong>`),c=c.replace(/__(.+?)__/g,`<strong${i("strong")}>$1</strong>`),c=c.replace(/(?<!\*)\*(?!\*)(.+?)(?<!\*)\*(?!\*)/g,`<em${i("em")}>$1</em>`),c=c.replace(/(?<!_)_(?!_)(.+?)(?<!_)_(?!_)/g,`<em${i("em")}>$1</em>`),c=c.replace(/~~(.+?)~~/g,`<del${i("del")}>$1</del>`),c=c.replace(/  $/gm,`<br${i("br")}>`),c=c.replace(/\n\n+/g,"</p><p>"),c="<p>"+c+"</p>",c=c.replace(/<p><\/p>/g,""),c=c.replace(/<p>(<h[1-6][^>]*>)/g,"$1"),c=c.replace(/(<\/h[1-6]>)<\/p>/g,"$1"),c=c.replace(/<p>(<blockquote[^>]*>)/g,"$1"),c=c.replace(/(<\/blockquote>)<\/p>/g,"$1"),c=c.replace(/<p>(<ul[^>]*>|<ol[^>]*>)/g,"$1"),c=c.replace(/(<\/ul>|<\/ol>)<\/p>/g,"$1"),c=c.replace(/<p>(<hr[^>]*>)<\/p>/g,"$1"),c=c.replace(/<p>(<table[^>]*>)/g,"$1"),c=c.replace(/(<\/table>)<\/p>/g,"$1"),c=c.replace(/<p>(<pre[^>]*>)/g,"$1"),c=c.replace(/(<\/pre>)<\/p>/g,"$1"),c=c.replace(/<p>(%%%CODEBLOCK\d+%%%)<\/p>/g,"$1"),p.forEach((e,t)=>{let n;if(e.custom&&r){if(n=r(e.code,e.lang),void 0===n){const t=!o&&e.lang?` class="language-${e.lang}"`:"",r=o?i("code"):t;n=`<pre${i("pre")}><code${r}>${a(e.code)}</code></pre>`}}else{const t=!o&&e.lang?` class="language-${e.lang}"`:"",r=o?i("code"):t;n=`<pre${i("pre")}><code${r}>${e.code}</code></pre>`}const l=`%%%CODEBLOCK${t}%%%`;c=c.replace(l,n)}),d.forEach((e,t)=>{const n=`%%%INLINECODE${t}%%%`;c=c.replace(n,`<code${i("code")}>${e}</code>`)}),c.trim()}function t(e,t,n){function r(e,r=""){if(t){const t=n[e]||"",o=r?`${t}; ${r}`:t;return o?` style="${o}"`:""}return` class="quikdown-${e}"`}return e=(e=(e=(e=(e=(e=e.replace(/\*\*(.+?)\*\*/g,`<strong${r("strong")}>$1</strong>`)).replace(/__(.+?)__/g,`<strong${r("strong")}>$1</strong>`)).replace(/(?<!\*)\*(?!\*)(.+?)(?<!\*)\*(?!\*)/g,`<em${r("em")}>$1</em>`)).replace(/(?<!_)_(?!_)(.+?)(?<!_)_(?!_)/g,`<em${r("em")}>$1</em>`)).replace(/~~(.+?)~~/g,`<del${r("del")}>$1</del>`)).replace(/`([^`]+)`/g,`<code${r("code")}>$1</code>`)}function n(e,n,r){function o(e,t=""){if(n){const n=r[e]||"",o=t?`${n}; ${t}`:n;return o?` style="${o}"`:""}return` class="quikdown-${e}"`}if(e.length<2)return null;let l=-1;for(let t=1;t<e.length;t++)if(/^\|?[\s\-:|]+\|?$/.test(e[t])&&e[t].includes("-")){l=t;break}if(-1===l)return null;const i=e.slice(0,l),a=e.slice(l+1),s=e[l].trim().replace(/^\|/,"").replace(/\|$/,"").split("|").map(e=>{const t=e.trim();return t.startsWith(":")&&t.endsWith(":")?"center":t.endsWith(":")?"right":"left"});let c=`<table${o("table")}>\n`;return i.length>0&&(c+=`<thead${o("thead")}>\n`,i.forEach(e=>{c+=`<tr${o("tr")}>\n`;e.trim().replace(/^\|/,"").replace(/\|$/,"").split("|").forEach((e,l)=>{const i=s[l]&&"left"!==s[l]?`text-align: ${s[l]}`:"",a=t(e.trim(),n,r);c+=`<th${o("th",i)}>${a}</th>\n`}),c+="</tr>\n"}),c+="</thead>\n"),a.length>0&&(c+=`<tbody${o("tbody")}>\n`,a.forEach(e=>{c+=`<tr${o("tr")}>\n`;e.trim().replace(/^\|/,"").replace(/\|$/,"").split("|").forEach((e,l)=>{const i=s[l]&&"left"!==s[l]?`text-align: ${s[l]}`:"",a=t(e.trim(),n,r);c+=`<td${o("td",i)}>${a}</td>\n`}),c+="</tr>\n"}),c+="</tbody>\n"),c+="</table>",c}e.emitStyles=function(){const e={h1:"font-size: 2em; font-weight: 600; margin: 0.67em 0; text-align: left",h2:"font-size: 1.5em; font-weight: 600; margin: 0.83em 0",h3:"font-size: 1.25em; font-weight: 600; margin: 1em 0",h4:"font-size: 1em; font-weight: 600; margin: 1.33em 0",h5:"font-size: 0.875em; font-weight: 600; margin: 1.67em 0",h6:"font-size: 0.85em; font-weight: 600; margin: 2em 0",pre:"background: #f4f4f4; padding: 10px; border-radius: 4px; overflow-x: auto; margin: 1em 0",code:"background: #f0f0f0; padding: 2px 4px; border-radius: 3px; font-family: monospace",blockquote:"border-left: 4px solid #ddd; margin-left: 0; padding-left: 1em",table:"border-collapse: collapse; width: 100%; margin: 1em 0",th:"border: 1px solid #ddd; padding: 8px; background-color: #f2f2f2; font-weight: bold; text-align: left",td:"border: 1px solid #ddd; padding: 8px; text-align: left",hr:"border: none; border-top: 1px solid #ddd; margin: 1em 0",img:"max-width: 100%; height: auto",a:"color: #0066cc; text-decoration: underline",strong:"font-weight: bold",em:"font-style: italic",del:"text-decoration: line-through",ul:"margin: 0.5em 0; padding-left: 2em",ol:"margin: 0.5em 0; padding-left: 2em",li:"margin: 0.25em 0","task-item":"list-style: none","task-checkbox":"margin-right: 0.5em"};let t="";for(const[n,r]of Object.entries(e))r&&(t+=`.quikdown-${n} { ${r} }\n`);return t},e.configure=function(t){return function(n){return e(n,t)}},e.version="1.0.2","undefined"!=typeof module&&module.exports&&(module.exports=e),"undefined"!=typeof window&&(window.quikdown=e);export{e as default};
//# sourceMappingURL=quikdown.esm.min.js.map
