/**
 * quikdown_yaml - YAML Markdown Parser
 * @version 1.2.0
 * @license BSD-2-Clause
 * @copyright DeftIO 2025
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).quikdown_yaml=t()}(this,function(){"use strict";function e(e,n={}){if(!e||"string"!=typeof e)return{type:"document",children:[]};return{type:"document",children:t(e.replace(/\r\n/g,"\n").replace(/\r/g,"\n"))}}function t(e,s){const c=[],o=e.split("\n");let l=0;for(;l<o.length;){const e=o[l];if(""===e.trim()){l++;continue}const s=e.match(/^(```|~~~)(.*)$/);if(s){const[,e,t]=s,n=t.trim(),i=[];for(l++;l<o.length;){if(o[l].match(/^(```|~~~)\s*$/)){l++;break}i.push(o[l]),l++}c.push({type:"code_block",lang:n||null,content:i.join("\n"),fence:e});continue}if(/^---+\s*$/.test(e)||/^\*\*\*+\s*$/.test(e)||/^___+\s*$/.test(e)){c.push({type:"hr"}),l++;continue}const u=e.match(/^(#{1,6})\s*(.+?)\s*#*$/);if(u){const[,e,t]=u;c.push({type:"heading",level:e.length,children:r(t)}),l++;continue}if(e.includes("|")){const e=n(o,l);if(e){c.push(e.node),l=e.nextIndex;continue}}if(e.match(/^>\s*/)){const e=[];for(;l<o.length&&o[l].match(/^>\s*/);)e.push(o[l].replace(/^>\s*/,"")),l++;c.push({type:"blockquote",children:t(e.join("\n"))});continue}if(e.match(/^(\s*)([*\-+]|\d+\.)\s+(.*)$/)){const e=i(o,l);c.push(e.node),l=e.nextIndex;continue}const h=[];for(;l<o.length;){const e=o[l];if(""===e.trim())break;if(/^(```|~~~)/.test(e))break;if(/^#{1,6}\s/.test(e))break;if(/^---+\s*$/.test(e)||/^\*\*\*+\s*$/.test(e)||/^___+\s*$/.test(e))break;if(/^>\s*/.test(e))break;if(/^(\s*)([*\-+]|\d+\.)\s+/.test(e))break;if(e.includes("|")&&l+1<o.length&&/^\|?[\s\-:|]+\|?$/.test(o[l+1]))break;h.push(e),l++}h.length>0&&c.push({type:"paragraph",children:r(h.join("\n"))})}return c}function n(e,t,n){if(t+1>=e.length)return null;const i=e[t],c=e[t+1];if(!/^\|?[\s\-:|]+\|?$/.test(c)||!c.includes("-"))return null;const o=s(i);if(0===o.length)return null;const l=s(c).map(e=>{const t=e.trim();return t.startsWith(":")&&t.endsWith(":")?"center":t.endsWith(":")?"right":"left"}),u=o.map(e=>r(e.trim())),h=[];let f=t+2;for(;f<e.length;){const t=e[f];if(!t.includes("|")||""===t.trim())break;const n=s(t);h.push(n.map(e=>r(e.trim()))),f++}return{node:{type:"table",headers:u,rows:h,alignments:l},nextIndex:f}}function s(e){let t=e.trim();return t.startsWith("|")&&(t=t.slice(1)),t.endsWith("|")&&(t=t.slice(0,-1)),t.split("|")}function i(e,t,n){const s=[];let c=t,o=0;const l=e[c].match(/^(\s*)([*\-+]|\d+\.)\s+(.*)$/),u=/^\d+\./.test(l[2]),h=l[1].length;for(;c<e.length&&o<1e3;){o++;const t=e[c].match(/^(\s*)([*\-+]|\d+\.)\s+(.*)$/);if(!t)break;const[,n,l,f]=t,p=n.length;if(p<h)break;const d=/^\d+\./.test(l);if(p===h&&d!==u)break;if(p>h){const t=[];let n=0;for(;c<e.length&&n<1e3;){n++;const s=e[c],i=s.match(/^(\s*)([*\-+]|\d+\.)\s+/);if(!i)break;if(i[1].length<h)break;if(i[1].length===h)break;t.push(s),c++}if(t.length>0&&s.length>0){const e=i(t,0),n=s[s.length-1];n.children?Array.isArray(n.children)||(n.children=[{type:"paragraph",children:n.children}]):n.children=[],n.children.push(e.node)}continue}const a={type:"list_item",checked:null,children:null},g=f.match(/^\[([x ])\]\s*(.*)$/i);g&&!u?(a.checked="x"===g[1].toLowerCase(),a.children=r(g[2])):a.children=r(f),s.push(a),c++}return{node:{type:"list",ordered:u,items:s},nextIndex:c}}function r(e,t){if(!e)return[];const n=[];let s=e;for(;s.length>0;){let e=!1;if(s.match(/^(.+?)(?:  |\\\n|\n)/)&&s.includes("\n")){const t=s.indexOf("\n"),i=s.slice(0,t),r=s.slice(t+1);if(i.endsWith("  ")||i.endsWith("\\")){const t=i.replace(/\\$/,"").replace(/  +$/,"");t&&n.push(...c(t)),n.push({type:"br"}),s=r,e=!0;continue}}const t=s.match(/^!\[([^\]]*)\]\(\s*([^)\s]+)\s*\)/);if(t){n.push({type:"image",alt:t[1],url:t[2].trim()}),s=s.slice(t[0].length),e=!0;continue}const i=s.match(/^\[([^\]]+)\]\(\s*([^)\s]+)\s*\)/);if(i){n.push({type:"link",url:i[2].trim(),children:c(i[1])}),s=s.slice(i[0].length),e=!0;continue}const r=s.match(/^`([^`]+)`/);if(r){n.push({type:"code",value:r[1]}),s=s.slice(r[0].length),e=!0;continue}const o=s.match(/^(\*\*|__)(.+?)\1/);if(o){n.push({type:"strong",children:c(o[2])}),s=s.slice(o[0].length),e=!0;continue}const l=s.match(/^~~(.+?)~~/);if(l){n.push({type:"del",children:c(l[1])}),s=s.slice(l[0].length),e=!0;continue}const u=s.match(/^(\*|_)(?!\1)(.+?)(?<!\1)\1(?!\1)/);if(u){n.push({type:"em",children:c(u[2])}),s=s.slice(u[0].length),e=!0;continue}const h=s.match(/^(https?:\/\/[^\s<>\[\]]+)/);if(h)n.push({type:"link",url:h[1],children:[{type:"text",value:h[1]}]}),s=s.slice(h[0].length),e=!0;else if(!e){const e=s.search(/[`*_~!\[\n]|https?:\/\//);if(-1===e){n.push({type:"text",value:s});break}0===e?(n.push({type:"text",value:s[0]}),s=s.slice(1)):(n.push({type:"text",value:s.slice(0,e)}),s=s.slice(e))}}return function(e){const t=[];for(const n of e)"text"===n.type&&t.length>0&&"text"===t[t.length-1].type?t[t.length-1].value+=n.value:t.push(n);return t}(n)}function c(e,t){return r(e.replace(/\n/g," "))}e.version="1.2.0","undefined"!=typeof module&&module.exports&&(module.exports=e),"undefined"!=typeof window&&(window.quikdown_ast=e);function o(t,n={}){return l(e(t,n),0)}function l(e,t){const n="  ".repeat(t);if(null==e)return"null";if("boolean"==typeof e)return e?"true":"false";if("number"==typeof e)return String(e);if("string"==typeof e)return h(e);if(Array.isArray(e)){if(0===e.length)return"[]";const s=[];for(const i of e)if("object"!=typeof i||null===i||Array.isArray(i)){const e=l(i,t+1);s.push(`${n}- ${e}`)}else{const e=Object.entries(i);if(e.length>0){const[i,r]=e[0],c=u(r,t+1);s.push(`${n}- ${i}: ${c}`);for(let i=1;i<e.length;i++){const[r,c]=e[i],o=u(c,t+1);s.push(`${n}  ${r}: ${o}`)}}else s.push(`${n}- {}`)}return"\n"+s.join("\n")}if("object"==typeof e){const s=Object.entries(e);if(0===s.length)return"{}";const i=[];for(const[e,r]of s){const s=u(r,t);i.push(`${n}${e}: ${s}`)}return i.join("\n")}return String(e)}function u(e,t){if(null==e)return"null";if("boolean"==typeof e)return e?"true":"false";if("number"==typeof e)return String(e);if("string"==typeof e)return h(e);if(Array.isArray(e))return 0===e.length?"[]":l(e,t+1);if("object"==typeof e){return 0===Object.entries(e).length?"{}":"\n"+l(e,t+1)}return String(e)}function h(e){if(!(""===e||e.includes("\n")||e.includes(":")||e.includes("#")||e.includes("'")||e.includes('"')||e.startsWith(" ")||e.endsWith(" ")||e.startsWith("-")||e.startsWith("[")||e.startsWith("{")||"true"===e||"false"===e||"null"===e||"yes"===e||"no"===e||"on"===e||"off"===e||/^\d+$/.test(e)||/^\d+\.\d+$/.test(e)))return e;if(e.includes("\n")){return`"${e.replace(/\n/g,"\\n").replace(/"/g,'\\"')}"`}return`"${e.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}"`}return o.parse=e,o.stringify=function(e){return l(e,0)},o.version="1.2.0","undefined"!=typeof module&&module.exports&&(module.exports=o),"undefined"!=typeof window&&(window.quikdown_yaml=o),o});
//# sourceMappingURL=quikdown_yaml.umd.min.js.map
