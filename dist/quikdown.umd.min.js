/**
 * quikdown - Lightweight Markdown Parser
 * @version 1.0.3dev2
 * @license BSD-2-Clause
 * @copyright DeftIO 2025
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).quikdown=t()}(this,function(){"use strict";const e={h1:"font-size: 2em; font-weight: 600; margin: 0.67em 0; text-align: left",h2:"font-size: 1.5em; font-weight: 600; margin: 0.83em 0",h3:"font-size: 1.25em; font-weight: 600; margin: 1em 0",h4:"font-size: 1em; font-weight: 600; margin: 1.33em 0",h5:"font-size: 0.875em; font-weight: 600; margin: 1.67em 0",h6:"font-size: 0.85em; font-weight: 600; margin: 2em 0",pre:"background: #f4f4f4; padding: 10px; border-radius: 4px; overflow-x: auto; margin: 1em 0",code:"background: #f0f0f0; padding: 2px 4px; border-radius: 3px; font-family: monospace",blockquote:"border-left: 4px solid #ddd; margin-left: 0; padding-left: 1em",table:"border-collapse: collapse; width: 100%; margin: 1em 0",thead:"",tbody:"",tr:"",th:"border: 1px solid #ddd; padding: 8px; background-color: #f2f2f2; font-weight: bold; text-align: left",td:"border: 1px solid #ddd; padding: 8px; text-align: left",hr:"border: none; border-top: 1px solid #ddd; margin: 1em 0",img:"max-width: 100%; height: auto",a:"color: #0066cc; text-decoration: underline",strong:"font-weight: bold",em:"font-style: italic",del:"text-decoration: line-through",ul:"margin: 0.5em 0; padding-left: 2em",ol:"margin: 0.5em 0; padding-left: 2em",li:"margin: 0.25em 0",br:"","task-item":"list-style: none","task-checkbox":"margin-right: 0.5em"};function t(e,t){return function(n,o=""){if(e){const e=t[n]||"",r=o?`${e}; ${o}`:e;return r?` style="${r}"`:""}return` class="quikdown-${n}"`}}function n(n,o={}){if(!n||"string"!=typeof n)return"";const{fence_plugin:l,inline_styles:s=!1}=o,i=e,c=t(s,i);function a(e){const t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};return e.replace(/[&<>"']/g,e=>t[e])}function p(e,t=!1){if(!e)return"";if(t)return e;const n=e.trim(),o=n.toLowerCase(),r=["javascript:","vbscript:","data:"];for(const e of r)if(o.startsWith(e))return"data:"===e&&o.startsWith("data:image/")?n:"#";return n}let d=n;const g=[],u=[];d=d.replace(/^(```|~~~)([^\n]*)\n([\s\S]*?)^\1$/gm,(e,t,n,o)=>{const r=`%%%CODEBLOCK${g.length}%%%`,s=n?n.trim():"";return l&&"function"==typeof l?g.push({lang:s,code:o.trimEnd(),custom:!0}):g.push({lang:s,code:a(o.trimEnd()),custom:!1}),r}),d=d.replace(/`([^`]+)`/g,(e,t)=>{const n=`%%%INLINECODE${u.length}%%%`;return u.push(a(t)),n}),d=a(d),d=function(e,t,n){const o=e.split("\n"),l=[];let s=!1,i=[];for(let e=0;e<o.length;e++){const c=o[e].trim();if(c.includes("|")&&(c.startsWith("|")||/[^\\|]/.test(c)))s||(s=!0,i=[]),i.push(c);else{if(s){const e=r(i,t,n);e?l.push(e):l.push(...i),s=!1,i=[]}l.push(o[e])}}if(s&&i.length>0){const e=r(i,t,n);e?l.push(e):l.push(...i)}return l.join("\n")}(d,s,i),d=d.replace(/^(#{1,6})\s+(.+?)\s*#*$/gm,(e,t,n)=>{const o=t.length;return`<h${o}${c("h"+o)}>${n}</h${o}>`}),d=d.replace(/^&gt;\s+(.+)$/gm,`<blockquote${c("blockquote")}>$1</blockquote>`),d=d.replace(/<\/blockquote>\n<blockquote>/g,"\n"),d=d.replace(/^---+$/gm,`<hr${c("hr")}>`),d=function(e,n,o){const r=t(n,o),l=e.split("\n"),s=[];let i=[];for(let e=0;e<l.length;e++){const t=l[e],o=t.match(/^(\s*)([*\-+]|\d+\.)\s+(.+)$/);if(o){const[,e,t,l]=o,c=Math.floor(e.length/2),a=/^\d+\./.test(t),p=a?"ol":"ul";let d=l,g="";const u=l.match(/^\[([x ])\]\s+(.*)$/i);if(u&&!a){const[,e,t]=u;d=`<input type="checkbox"${n?' style="margin-right: 0.5em"':' class="quikdown-task-checkbox"'}${"x"===e.toLowerCase()?" checked":""} disabled> ${t}`,g=n?' style="list-style: none"':' class="quikdown-task-item"'}for(;i.length>c+1;){const e=i.pop();s.push(`</${e.type}>`)}if(i.length===c)i.push({type:p,level:c}),s.push(`<${p}${r(p)}>`);else if(i.length===c+1){const e=i[i.length-1];e.type!==p&&(s.push(`</${e.type}>`),i.pop(),i.push({type:p,level:c}),s.push(`<${p}${r(p)}>`))}const f=g||r("li");s.push(`<li${f}>${d}</li>`)}else{for(;i.length>0;){const e=i.pop();s.push(`</${e.type}>`)}s.push(t)}}for(;i.length>0;){const e=i.pop();s.push(`</${e.type}>`)}return s.join("\n")}(d,s,i),d=d.replace(/!\[([^\]]*)\]\(([^)]+)\)/g,(e,t,n)=>{const r=p(n,o.allow_unsafe_urls);return`<img${c("img")} src="${r}" alt="${t}">`}),d=d.replace(/\[([^\]]+)\]\(([^)]+)\)/g,(e,t,n)=>{const r=p(n,o.allow_unsafe_urls),l=/^https?:\/\//i.test(r)?' rel="noopener noreferrer"':"";return`<a${c("a")} href="${r}"${l}>${t}</a>`}),d=d.replace(/(^|\s)(https?:\/\/[^\s<]+)/g,(e,t,n)=>{const r=p(n,o.allow_unsafe_urls);return`${t}<a${c("a")} href="${r}" rel="noopener noreferrer">${n}</a>`});[[/\*\*(.+?)\*\*/g,"strong"],[/__(.+?)__/g,"strong"],[/(?<!\*)\*(?!\*)(.+?)(?<!\*)\*(?!\*)/g,"em"],[/(?<!_)_(?!_)(.+?)(?<!_)_(?!_)/g,"em"],[/~~(.+?)~~/g,"del"]].forEach(([e,t])=>{d=d.replace(e,`<${t}${c(t)}>$1</${t}>`)}),d=d.replace(/  $/gm,`<br${c("br")}>`),d=d.replace(/\n\n+/g,"</p><p>"),d="<p>"+d+"</p>";return[[/<p><\/p>/g,""],[/<p>(<h[1-6][^>]*>)/g,"$1"],[/(<\/h[1-6]>)<\/p>/g,"$1"],[/<p>(<blockquote[^>]*>)/g,"$1"],[/(<\/blockquote>)<\/p>/g,"$1"],[/<p>(<ul[^>]*>|<ol[^>]*>)/g,"$1"],[/(<\/ul>|<\/ol>)<\/p>/g,"$1"],[/<p>(<hr[^>]*>)<\/p>/g,"$1"],[/<p>(<table[^>]*>)/g,"$1"],[/(<\/table>)<\/p>/g,"$1"],[/<p>(<pre[^>]*>)/g,"$1"],[/(<\/pre>)<\/p>/g,"$1"],[/<p>(%%%CODEBLOCK\d+%%%)<\/p>/g,"$1"]].forEach(([e,t])=>{d=d.replace(e,t)}),g.forEach((e,t)=>{let n;if(e.custom&&l){if(n=l(e.code,e.lang),void 0===n){const t=!s&&e.lang?` class="language-${e.lang}"`:"",o=s?c("code"):t;n=`<pre${c("pre")}><code${o}>${a(e.code)}</code></pre>`}}else{const t=!s&&e.lang?` class="language-${e.lang}"`:"",o=s?c("code"):t;n=`<pre${c("pre")}><code${o}>${e.code}</code></pre>`}const o=`%%%CODEBLOCK${t}%%%`;d=d.replace(o,n)}),u.forEach((e,t)=>{const n=`%%%INLINECODE${t}%%%`;d=d.replace(n,`<code${c("code")}>${e}</code>`)}),d.trim()}function o(e,n,o){const r=t(n,o);return[[/\*\*(.+?)\*\*/g,"strong"],[/__(.+?)__/g,"strong"],[/(?<!\*)\*(?!\*)(.+?)(?<!\*)\*(?!\*)/g,"em"],[/(?<!_)_(?!_)(.+?)(?<!_)_(?!_)/g,"em"],[/~~(.+?)~~/g,"del"],[/`([^`]+)`/g,"code"]].forEach(([t,n])=>{e=e.replace(t,`<${n}${r(n)}>$1</${n}>`)}),e}function r(e,n,r){const l=t(n,r);if(e.length<2)return null;let s=-1;for(let t=1;t<e.length;t++)if(/^\|?[\s\-:|]+\|?$/.test(e[t])&&e[t].includes("-")){s=t;break}if(-1===s)return null;const i=e.slice(0,s),c=e.slice(s+1),a=e[s].trim().replace(/^\|/,"").replace(/\|$/,"").split("|").map(e=>{const t=e.trim();return t.startsWith(":")&&t.endsWith(":")?"center":t.endsWith(":")?"right":"left"});let p=`<table${l("table")}>\n`;return i.length>0&&(p+=`<thead${l("thead")}>\n`,i.forEach(e=>{p+=`<tr${l("tr")}>\n`;e.trim().replace(/^\|/,"").replace(/\|$/,"").split("|").forEach((e,t)=>{const s=a[t]&&"left"!==a[t]?`text-align: ${a[t]}`:"",i=o(e.trim(),n,r);p+=`<th${l("th",s)}>${i}</th>\n`}),p+="</tr>\n"}),p+="</thead>\n"),c.length>0&&(p+=`<tbody${l("tbody")}>\n`,c.forEach(e=>{p+=`<tr${l("tr")}>\n`;e.trim().replace(/^\|/,"").replace(/\|$/,"").split("|").forEach((e,t)=>{const s=a[t]&&"left"!==a[t]?`text-align: ${a[t]}`:"",i=o(e.trim(),n,r);p+=`<td${l("td",s)}>${i}</td>\n`}),p+="</tr>\n"}),p+="</tbody>\n"),p+="</table>",p}return n.emitStyles=function(){const t=e;let n="";for(const[e,o]of Object.entries(t))o&&(n+=`.quikdown-${e} { ${o} }\n`);return n},n.configure=function(e){return function(t){return n(t,e)}},n.version="1.0.3dev2","undefined"!=typeof module&&module.exports&&(module.exports=n),"undefined"!=typeof window&&(window.quikdown=n),n});
//# sourceMappingURL=quikdown.umd.min.js.map
