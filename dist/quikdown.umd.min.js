/**
 * quikdown - Lightweight Markdown Parser
 * @version 2.0
 * @license BSD-2-Clause
 * @copyright DeftIO 2025
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).quikdown=t()}(this,function(){"use strict";function e(e,t={}){if(!e||"string"!=typeof e)return"";const{fence_plugin:o,inline_styles:n=!1}=t,l="margin-top: 0.5em; margin-bottom: 0.3em",a="margin: 0.5em 0; padding-left: 2em",i="border: 1px solid #ddd; padding: 8px",c={h1:l,h2:l,h3:l,h4:l,h5:l,h6:l,pre:"background: #f4f4f4; padding: 10px; border-radius: 4px; overflow-x: auto",code:"background: #f0f0f0; padding: 2px 4px; border-radius: 3px",blockquote:"border-left: 4px solid #ddd; margin-left: 0; padding-left: 1em; color: #666",table:"border-collapse: collapse; width: 100%; margin: 1em 0",thead:"",tbody:"",tr:"",th:i+"; background-color: #f2f2f2; font-weight: bold",td:i+"; text-align: left",hr:"border: none; border-top: 1px solid #ddd; margin: 1em 0",img:"max-width: 100%; height: auto",a:"color: #0066cc; text-decoration: underline",strong:"font-weight: bold",em:"font-style: italic",del:"text-decoration: line-through",ul:a,ol:a,li:"margin: 0.25em 0",br:""};function p(e,t=""){if(n){const r=c[e]||"",o=t?`${r}; ${t}`:r;return o?` style="${o}"`:""}return` class="quikdown-${e}"`}function d(e){const t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};return e.replace(/[&<>"']/g,e=>t[e])}function s(e,t=!1){if(!e)return"";if(t)return e;const r=e.trim(),o=r.toLowerCase(),n=["javascript:","vbscript:","data:"];for(const e of n)if(o.startsWith(e))return"data:"===e&&o.startsWith("data:image/")?r:"#";return r}let g=e;const u=[],f=[];return g=g.replace(/(?:```|~~~)([^\n]*)\n([\s\S]*?)(?:```|~~~)/g,(e,t,r)=>{const n=`%%%CODEBLOCK${u.length}%%%`;return o&&"function"==typeof o?u.push({lang:t||"",code:r.trimEnd(),custom:!0}):u.push({lang:t||"",code:d(r.trimEnd()),custom:!1}),n}),g=g.replace(/`([^`]+)`/g,(e,t)=>{const r=`%%%INLINECODE${f.length}%%%`;return f.push(d(t)),r}),g=d(g),g=function(e,t,o){const n=e.split("\n"),l=[];let a=!1,i=[];for(let e=0;e<n.length;e++){const c=n[e].trim();if(c.includes("|")&&(c.startsWith("|")||/[^\\|]/.test(c)))a||(a=!0,i=[]),i.push(c);else{if(a){const e=r(i,t,o);e?l.push(e):l.push(...i),a=!1,i=[]}l.push(n[e])}}if(a&&i.length>0){const e=r(i,t,o);e?l.push(e):l.push(...i)}return l.join("\n")}(g,n,c),g=g.replace(/^(#{1,6})\s+(.+?)\s*#*$/gm,(e,t,r)=>{const o=t.length;return`<h${o}${p("h"+o)}>${r}</h${o}>`}),g=g.replace(/^&gt;\s+(.+)$/gm,`<blockquote${p("blockquote")}>$1</blockquote>`),g=g.replace(/<\/blockquote>\n<blockquote>/g,"\n"),g=g.replace(/^---+$/gm,`<hr${p("hr")}>`),g=function(e,t,r){function o(e,o=""){if(t){const t=r[e]||"",n=o?`${t}; ${o}`:t;return n?` style="${n}"`:""}return` class="quikdown-${e}"`}const n=e.split("\n"),l=[];let a=[];for(let e=0;e<n.length;e++){const t=n[e],r=t.match(/^(\s*)([*\-+]|\d+\.)\s+(.+)$/);if(r){const[,e,t,n]=r,i=Math.floor(e.length/2),c=/^\d+\./.test(t)?"ol":"ul";for(;a.length>i+1;){const e=a.pop();l.push(`</${e.type}>`)}if(a.length===i)a.push({type:c,level:i}),l.push(`<${c}${o(c)}>`);else if(a.length===i+1){const e=a[a.length-1];e.type!==c&&(l.push(`</${e.type}>`),a.pop(),a.push({type:c,level:i}),l.push(`<${c}${o(c)}>`))}l.push(`<li${o("li")}>${n}</li>`)}else{for(;a.length>0;){const e=a.pop();l.push(`</${e.type}>`)}l.push(t)}}for(;a.length>0;){const e=a.pop();l.push(`</${e.type}>`)}return l.join("\n")}(g,n,c),g=g.replace(/!\[([^\]]*)\]\(([^)]+)\)/g,(e,r,o)=>{const n=s(o,t.allow_unsafe_urls);return`<img${p("img")} src="${n}" alt="${r}">`}),g=g.replace(/\[([^\]]+)\]\(([^)]+)\)/g,(e,r,o)=>{const n=s(o,t.allow_unsafe_urls),l=/^https?:\/\//i.test(n)?' rel="noopener noreferrer"':"";return`<a${p("a")} href="${n}"${l}>${r}</a>`}),g=g.replace(/(^|\s)(https?:\/\/[^\s<]+)/g,(e,r,o)=>{const n=s(o,t.allow_unsafe_urls);return`${r}<a${p("a")} href="${n}" rel="noopener noreferrer">${o}</a>`}),g=g.replace(/\*\*(.+?)\*\*/g,`<strong${p("strong")}>$1</strong>`),g=g.replace(/__(.+?)__/g,`<strong${p("strong")}>$1</strong>`),g=g.replace(/(?<!\*)\*(?!\*)(.+?)(?<!\*)\*(?!\*)/g,`<em${p("em")}>$1</em>`),g=g.replace(/(?<!_)_(?!_)(.+?)(?<!_)_(?!_)/g,`<em${p("em")}>$1</em>`),g=g.replace(/~~(.+?)~~/g,`<del${p("del")}>$1</del>`),g=g.replace(/  $/gm,`<br${p("br")}>`),g=g.replace(/\n\n+/g,"</p><p>"),g="<p>"+g+"</p>",g=g.replace(/<p><\/p>/g,""),g=g.replace(/<p>(<h[1-6][^>]*>)/g,"$1"),g=g.replace(/(<\/h[1-6]>)<\/p>/g,"$1"),g=g.replace(/<p>(<blockquote[^>]*>)/g,"$1"),g=g.replace(/(<\/blockquote>)<\/p>/g,"$1"),g=g.replace(/<p>(<ul[^>]*>|<ol[^>]*>)/g,"$1"),g=g.replace(/(<\/ul>|<\/ol>)<\/p>/g,"$1"),g=g.replace(/<p>(<hr[^>]*>)<\/p>/g,"$1"),g=g.replace(/<p>(<table[^>]*>)/g,"$1"),g=g.replace(/(<\/table>)<\/p>/g,"$1"),g=g.replace(/<p>(<pre[^>]*>)/g,"$1"),g=g.replace(/(<\/pre>)<\/p>/g,"$1"),g=g.replace(/<p>(%%%CODEBLOCK\d+%%%)<\/p>/g,"$1"),u.forEach((e,t)=>{let r;if(e.custom&&o){if(r=o(e.code,e.lang),void 0===r){const t=!n&&e.lang?` class="language-${e.lang}"`:"",o=n?p("code"):t;r=`<pre${p("pre")}><code${o}>${d(e.code)}</code></pre>`}}else{const t=!n&&e.lang?` class="language-${e.lang}"`:"",o=n?p("code"):t;r=`<pre${p("pre")}><code${o}>${e.code}</code></pre>`}const l=`%%%CODEBLOCK${t}%%%`;g=g.replace(l,r)}),f.forEach((e,t)=>{const r=`%%%INLINECODE${t}%%%`;g=g.replace(r,`<code${p("code")}>${e}</code>`)}),g.trim()}function t(e,t,r){function o(e,o=""){if(t){const t=r[e]||"",n=o?`${t}; ${o}`:t;return n?` style="${n}"`:""}return` class="quikdown-${e}"`}return e=(e=(e=(e=(e=(e=e.replace(/\*\*(.+?)\*\*/g,`<strong${o("strong")}>$1</strong>`)).replace(/__(.+?)__/g,`<strong${o("strong")}>$1</strong>`)).replace(/(?<!\*)\*(?!\*)(.+?)(?<!\*)\*(?!\*)/g,`<em${o("em")}>$1</em>`)).replace(/(?<!_)_(?!_)(.+?)(?<!_)_(?!_)/g,`<em${o("em")}>$1</em>`)).replace(/~~(.+?)~~/g,`<del${o("del")}>$1</del>`)).replace(/`([^`]+)`/g,`<code${o("code")}>$1</code>`)}function r(e,r,o){function n(e,t=""){if(r){const r=o[e]||"",n=t?`${r}; ${t}`:r;return n?` style="${n}"`:""}return` class="quikdown-${e}"`}if(e.length<2)return null;let l=-1;for(let t=1;t<e.length;t++)if(/^\|?[\s\-:|]+\|?$/.test(e[t])&&e[t].includes("-")){l=t;break}if(-1===l)return null;const a=e.slice(0,l),i=e.slice(l+1),c=e[l].trim().replace(/^\|/,"").replace(/\|$/,"").split("|").map(e=>{const t=e.trim();return t.startsWith(":")&&t.endsWith(":")?"center":t.endsWith(":")?"right":"left"});let p=`<table${n("table")}>\n`;return a.length>0&&(p+=`<thead${n("thead")}>\n`,a.forEach(e=>{p+=`<tr${n("tr")}>\n`;e.trim().replace(/^\|/,"").replace(/\|$/,"").split("|").forEach((e,l)=>{const a=c[l]&&"left"!==c[l]?`text-align: ${c[l]}`:"",i=t(e.trim(),r,o);p+=`<th${n("th",a)}>${i}</th>\n`}),p+="</tr>\n"}),p+="</thead>\n"),i.length>0&&(p+=`<tbody${n("tbody")}>\n`,i.forEach(e=>{p+=`<tr${n("tr")}>\n`;e.trim().replace(/^\|/,"").replace(/\|$/,"").split("|").forEach((e,l)=>{const a=c[l]&&"left"!==c[l]?`text-align: ${c[l]}`:"",i=t(e.trim(),r,o);p+=`<td${n("td",a)}>${i}</td>\n`}),p+="</tr>\n"}),p+="</tbody>\n"),p+="</table>",p}return e.emitStyles=function(){const e={h1:"margin-top: 0.5em; margin-bottom: 0.3em",h2:"margin-top: 0.5em; margin-bottom: 0.3em",h3:"margin-top: 0.5em; margin-bottom: 0.3em",h4:"margin-top: 0.5em; margin-bottom: 0.3em",h5:"margin-top: 0.5em; margin-bottom: 0.3em",h6:"margin-top: 0.5em; margin-bottom: 0.3em",pre:"background: #f4f4f4; padding: 10px; border-radius: 4px; overflow-x: auto",code:"background: #f0f0f0; padding: 2px 4px; border-radius: 3px",blockquote:"border-left: 4px solid #ddd; margin-left: 0; padding-left: 1em; color: #666",table:"border-collapse: collapse; width: 100%; margin: 1em 0",th:"border: 1px solid #ddd; padding: 8px; background-color: #f2f2f2; font-weight: bold",td:"border: 1px solid #ddd; padding: 8px; text-align: left",hr:"border: none; border-top: 1px solid #ddd; margin: 1em 0",img:"max-width: 100%; height: auto",a:"color: #0066cc; text-decoration: underline",strong:"font-weight: bold",em:"font-style: italic",del:"text-decoration: line-through",ul:"margin: 0.5em 0; padding-left: 2em",ol:"margin: 0.5em 0; padding-left: 2em",li:"margin: 0.25em 0"};let t="";for(const[r,o]of Object.entries(e))o&&(t+=`.quikdown-${r} { ${o} }\n`);return t},e.configure=function(t){return function(r){return e(r,t)}},e.version="2.0","undefined"!=typeof module&&module.exports&&(module.exports=e),"undefined"!=typeof window&&(window.quikdown=e),e});
//# sourceMappingURL=quikdown.umd.min.js.map
