/**
 * quikdown - Lightweight Markdown Parser
 * @version 1.0.5
 * @license BSD-2-Clause
 * @copyright DeftIO 2025
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).quikdown=t()}(this,function(){"use strict";const e="quikdown-",t="§CB",n={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},o={h1:"font-size:2em;font-weight:600;margin:.67em 0;text-align:left",h2:"font-size:1.5em;font-weight:600;margin:.83em 0",h3:"font-size:1.25em;font-weight:600;margin:1em 0",h4:"font-size:1em;font-weight:600;margin:1.33em 0",h5:"font-size:.875em;font-weight:600;margin:1.67em 0",h6:"font-size:.85em;font-weight:600;margin:2em 0",pre:"background:#f4f4f4;padding:10px;border-radius:4px;overflow-x:auto;margin:1em 0",code:"background:#f0f0f0;padding:2px 4px;border-radius:3px;font-family:monospace",blockquote:"border-left:4px solid #ddd;margin-left:0;padding-left:1em",table:"border-collapse:collapse;width:100%;margin:1em 0",th:"border:1px solid #ddd;padding:8px;background-color:#f2f2f2;font-weight:bold;text-align:left",td:"border:1px solid #ddd;padding:8px;text-align:left",hr:"border:none;border-top:1px solid #ddd;margin:1em 0",img:"max-width:100%;height:auto",a:"color:#06c;text-decoration:underline",strong:"font-weight:bold",em:"font-style:italic",del:"text-decoration:line-through",ul:"margin:.5em 0;padding-left:2em",ol:"margin:.5em 0;padding-left:2em",li:"margin:.25em 0","task-item":"list-style:none","task-checkbox":"margin-right:.5em"};function r(r,l={}){if(!r||"string"!=typeof r)return"";const{fence_plugin:c,inline_styles:s=!1,bidirectional:i=!1,lazy_linefeeds:p=!1}=l,d=function(t,n){return function(o,r=""){if(t){const e=n[o];return e||r?` style="${r?e?`${e};${r}`:r:e}"`:""}return` class="${e}${o}"`}}(s,o);function g(e){return e.replace(/[&<>"']/g,e=>n[e])}const f=i?e=>` data-qd="${g(e)}"`:()=>"";function $(e,t=!1){if(!e)return"";if(t)return e;const n=e.trim(),o=n.toLowerCase(),r=["javascript:","vbscript:","data:"];for(const e of r)if(o.startsWith(e))return"data:"===e&&o.startsWith("data:image/")?n:"#";return n}let u=r;const h=[],m=[];u=u.replace(/^(```|~~~)([^\n]*)\n([\s\S]*?)^\1$/gm,(e,n,o,r)=>{const l=`${t}${h.length}§`,a=o?o.trim():"";return c&&"function"==typeof c?h.push({lang:a,code:r.trimEnd(),custom:!0,fence:n}):h.push({lang:a,code:g(r.trimEnd()),custom:!1,fence:n}),l}),u=u.replace(/`([^`]+)`/g,(e,t)=>{const n=`§IC${m.length}§`;return m.push(g(t)),n}),u=g(u),u=function(e,t){const n=e.split("\n"),o=[];let r=!1,l=[];for(let e=0;e<n.length;e++){const c=n[e].trim();if(c.includes("|")&&(c.startsWith("|")||/[^\\|]/.test(c)))r||(r=!0,l=[]),l.push(c);else{if(r){const e=a(l,t);e?o.push(e):o.push(...l),r=!1,l=[]}o.push(n[e])}}if(r&&l.length>0){const e=a(l,t);e?o.push(e):o.push(...l)}return o.join("\n")}(u,d),u=u.replace(/^(#{1,6})\s+(.+?)\s*#*$/gm,(e,t,n)=>{const o=t.length;return`<h${o}${d("h"+o)}${f(t)}>${n}</h${o}>`}),u=u.replace(/^&gt;\s+(.+)$/gm,`<blockquote${d("blockquote")}>$1</blockquote>`),u=u.replace(/<\/blockquote>\n<blockquote>/g,"\n"),u=u.replace(/^---+$/gm,`<hr${d("hr")}>`),u=function(t,n,o,r){const l=t.split("\n"),a=[];let c=[];const s=e=>e.replace(/[&<>"']/g,e=>({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"}[e])),i=r?e=>` data-qd="${s(e)}"`:()=>"";for(let t=0;t<l.length;t++){const r=l[t],s=r.match(/^(\s*)([*\-+]|\d+\.)\s+(.+)$/);if(s){const[,t,r,l]=s,p=Math.floor(t.length/2),d=/^\d+\./.test(r),g=d?"ol":"ul";let f=l,$="";const u=l.match(/^\[([x ])\]\s+(.*)$/i);if(u&&!d){const[,t,n]=u,r="x"===t.toLowerCase();f=`<input type="checkbox"${o?' style="margin-right:.5em"':` class="${e}task-checkbox"`}${r?" checked":""} disabled> ${n}`,$=o?' style="list-style:none"':` class="${e}task-item"`}for(;c.length>p+1;){const e=c.pop();a.push(`</${e.type}>`)}if(c.length===p)c.push({type:g,level:p}),a.push(`<${g}${n(g)}>`);else if(c.length===p+1){const e=c[c.length-1];e.type!==g&&(a.push(`</${e.type}>`),c.pop(),c.push({type:g,level:p}),a.push(`<${g}${n(g)}>`))}const h=$||n("li");a.push(`<li${h}${i(r)}>${f}</li>`)}else{for(;c.length>0;){const e=c.pop();a.push(`</${e.type}>`)}a.push(r)}}for(;c.length>0;){const e=c.pop();a.push(`</${e.type}>`)}return a.join("\n")}(u,d,s,i),u=u.replace(/!\[([^\]]*)\]\(([^)]+)\)/g,(e,t,n)=>{const o=$(n,l.allow_unsafe_urls),r=i&&t?` data-qd-alt="${g(t)}"`:"",a=i?` data-qd-src="${g(n)}"`:"";return`<img${d("img")} src="${o}" alt="${t}"${r}${a}${f("!")}>`}),u=u.replace(/\[([^\]]+)\]\(([^)]+)\)/g,(e,t,n)=>{const o=$(n,l.allow_unsafe_urls),r=/^https?:\/\//i.test(o)?' rel="noopener noreferrer"':"",a=i?` data-qd-text="${g(t)}"`:"";return`<a${d("a")} href="${o}"${r}${a}${f("[")}>${t}</a>`}),u=u.replace(/(^|\s)(https?:\/\/[^\s<]+)/g,(e,t,n)=>{const o=$(n,l.allow_unsafe_urls);return`${t}<a${d("a")} href="${o}" rel="noopener noreferrer">${n}</a>`});if([[/\*\*(.+?)\*\*/g,"strong","**"],[/__(.+?)__/g,"strong","__"],[/(?<!\*)\*(?!\*)(.+?)(?<!\*)\*(?!\*)/g,"em","*"],[/(?<!_)_(?!_)(.+?)(?<!_)_(?!_)/g,"em","_"],[/~~(.+?)~~/g,"del","~~"]].forEach(([e,t,n])=>{u=u.replace(e,`<${t}${d(t)}${f(n)}>$1</${t}>`)}),p){const e=[];let t=0;u=u.replace(/<table[^>]*>[\s\S]*?<\/table>/g,n=>{const o=`§PROTECTED_BLOCK_${t}§`;return e[t]=n,t++,o}),u=u.replace(/<[uo]l[^>]*>[\s\S]*?<\/[uo]l>/g,n=>{const o=`§PROTECTED_BLOCK_${t}§`;return e[t]=n,t++,o}),u=u.replace(/\n\n+/g,"§PARAGRAPH§"),u=u.replace(/(<\/(?:h[1-6]|blockquote|pre)>)\n/g,"$1§BLOCKBREAK§"),u=u.replace(/(<(?:h[1-6]|blockquote|pre)[^>]*>)\n/g,"$1§BLOCKBREAK§"),u=u.replace(/(<hr[^>]*>)\n/g,"$1§BLOCKBREAK§"),u=u.replace(/\n(<(?:h[1-6]|blockquote|pre|hr)[^>]*>)/g,"§BLOCKBREAK§$1"),u=u.replace(/\n(§PROTECTED_BLOCK_\d+§)/g,"§BLOCKBREAK§$1"),u=u.replace(/(§PROTECTED_BLOCK_\d+§)\n/g,"$1§BLOCKBREAK§"),u=u.replace(/\n/g,`<br${d("br")}>`),u=u.replace(/§BLOCKBREAK§/g,"\n"),u=u.replace(/§PARAGRAPH§/g,"</p><p>"),e.forEach((e,t)=>{u=u.replace(`§PROTECTED_BLOCK_${t}§`,e)}),u="<p>"+u+"</p>"}else u=u.replace(/  $/gm,`<br${d("br")}>`),u=u.replace(/\n\n+/g,"</p><p>"),u="<p>"+u+"</p>";return[[/<p><\/p>/g,""],[/<p>(<h[1-6][^>]*>)/g,"$1"],[/(<\/h[1-6]>)<\/p>/g,"$1"],[/<p>(<blockquote[^>]*>)/g,"$1"],[/(<\/blockquote>)<\/p>/g,"$1"],[/<p>(<ul[^>]*>|<ol[^>]*>)/g,"$1"],[/(<\/ul>|<\/ol>)<\/p>/g,"$1"],[/<p>(<hr[^>]*>)<\/p>/g,"$1"],[/<p>(<table[^>]*>)/g,"$1"],[/(<\/table>)<\/p>/g,"$1"],[/<p>(<pre[^>]*>)/g,"$1"],[/(<\/pre>)<\/p>/g,"$1"],[new RegExp(`<p>(${t}\\d+§)</p>`,"g"),"$1"]].forEach(([e,t])=>{u=u.replace(e,t)}),h.forEach((e,n)=>{let o;if(e.custom&&c){if(o=c(e.code,e.lang),void 0===o){const t=!s&&e.lang?` class="language-${e.lang}"`:"",n=s?d("code"):t,r=i&&e.lang?` data-qd-lang="${g(e.lang)}"`:"",l=i?` data-qd-fence="${g(e.fence)}"`:"";o=`<pre${d("pre")}${l}${r}><code${n}>${g(e.code)}</code></pre>`}}else{const t=!s&&e.lang?` class="language-${e.lang}"`:"",n=s?d("code"):t,r=i&&e.lang?` data-qd-lang="${g(e.lang)}"`:"",l=i?` data-qd-fence="${g(e.fence)}"`:"";o=`<pre${d("pre")}${l}${r}><code${n}>${e.code}</code></pre>`}const r=`${t}${n}§`;u=u.replace(r,o)}),m.forEach((e,t)=>{const n=`§IC${t}§`;u=u.replace(n,`<code${d("code")}${f("`")}>${e}</code>`)}),u.trim()}function l(e,t){return[[/\*\*(.+?)\*\*/g,"strong"],[/__(.+?)__/g,"strong"],[/(?<!\*)\*(?!\*)(.+?)(?<!\*)\*(?!\*)/g,"em"],[/(?<!_)_(?!_)(.+?)(?<!_)_(?!_)/g,"em"],[/~~(.+?)~~/g,"del"],[/`([^`]+)`/g,"code"]].forEach(([n,o])=>{e=e.replace(n,`<${o}${t(o)}>$1</${o}>`)}),e}function a(e,t){if(e.length<2)return null;let n=-1;for(let t=1;t<e.length;t++)if(/^\|?[\s\-:|]+\|?$/.test(e[t])&&e[t].includes("-")){n=t;break}if(-1===n)return null;const o=e.slice(0,n),r=e.slice(n+1),a=e[n].trim().replace(/^\|/,"").replace(/\|$/,"").split("|").map(e=>{const t=e.trim();return t.startsWith(":")&&t.endsWith(":")?"center":t.endsWith(":")?"right":"left"});let c=`<table${t("table")}>\n`;return c+=`<thead${t("thead")}>\n`,o.forEach(e=>{c+=`<tr${t("tr")}>\n`;e.trim().replace(/^\|/,"").replace(/\|$/,"").split("|").forEach((e,n)=>{const o=a[n]&&"left"!==a[n]?`text-align:${a[n]}`:"",r=l(e.trim(),t);c+=`<th${t("th",o)}>${r}</th>\n`}),c+="</tr>\n"}),c+="</thead>\n",r.length>0&&(c+=`<tbody${t("tbody")}>\n`,r.forEach(e=>{c+=`<tr${t("tr")}>\n`;e.trim().replace(/^\|/,"").replace(/\|$/,"").split("|").forEach((e,n)=>{const o=a[n]&&"left"!==a[n]?`text-align:${a[n]}`:"",r=l(e.trim(),t);c+=`<td${t("td",o)}>${r}</td>\n`}),c+="</tr>\n"}),c+="</tbody>\n"),c+="</table>",c}return r.emitStyles=function(e="quikdown-",t="light"){const n=o,r={"#f4f4f4":"#2a2a2a","#f0f0f0":"#2a2a2a","#f2f2f2":"#2a2a2a","#ddd":"#3a3a3a","#06c":"#6db3f2",_textColor:"#e0e0e0"},l={_textColor:"#333"};let a="";for(const[o,c]of Object.entries(n)){let n=c;if("dark"===t&&r){for(const[e,t]of Object.entries(r))e.startsWith("_")||(n=n.replace(new RegExp(e,"g"),t));["h1","h2","h3","h4","h5","h6","td","li","blockquote"].includes(o)&&(n+=`;color:${r._textColor}`)}else if("light"===t&&l){["h1","h2","h3","h4","h5","h6","td","li","blockquote"].includes(o)&&(n+=`;color:${l._textColor}`)}a+=`.${e}${o} { ${n} }\n`}return a},r.configure=function(e){return function(t){return r(t,e)}},r.version="1.0.5","undefined"!=typeof module&&module.exports&&(module.exports=r),"undefined"!=typeof window&&(window.quikdown=r),r});
//# sourceMappingURL=quikdown.umd.min.js.map
